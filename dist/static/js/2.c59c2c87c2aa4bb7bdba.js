webpackJsonp([2],{GWhL:function(e,t){},yUY4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{popupVisible:!1,type:"",value:"",operate:"否",service:"",des:"",price:"",unit:"",slots:[],selfChoose:!1,title:"车辆保险",selectData:{},getService:{},operateSlots:[{values:["否","是"]}],serviceSlots:[],radioArr:[],checkedArr:[]}},beforeRouteEnter:function(e,t,i){i(function(e){document.title="增值服务"})},computed:{getCarInfo:function(){return this.$store.getters.GET_CAR_INFO},getServiceInfo:function(){return this.$store.getters.GET_SERVICE_INFO}},mounted:function(){this.operate="是,否"===this.getServiceInfo.is_open?"否":this.getServiceInfo.is_open,this.service=this.getServiceInfo.name,this.des=this.getServiceInfo.explain,this.price=this.getServiceInfo.price,this.unit=this.getServiceInfo.unit,this.selectData.car_type=this.getCarInfo.car_type,this.selectData.price_mode=this.getServiceInfo.choosePriceMode;var e=this;"自选服务"===this.getServiceInfo.name&&(this.selfChoose=!0,this.selectData.is_open=this.getServiceInfo.is_open,this.$axios({url:this.$baseUrl+"?r=interfaces/car-valuation/get-self-service-data",method:"post",data:this.selectData,transformRequest:[function(e){var t="";for(var i in e)t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){0===t.data.errcode?(e.radioArr=t.data.data,e.$nextTick(function(){e.getServiceInfo.checkedArr&&e.getServiceInfo.checkedArr.length&&e.getServiceInfo.checkedArr.forEach(function(e,t){$("#"+e).addClass("isCheck"),$("#"+e).find(".mint-radio-input")[0].checked=!0})})):e.$toast(t.data.msg)}))},methods:{check:function(){var e=0;$(event.currentTarget.parentNode).find(".mint-radio-input").forEach(function(e){e.checked=!1}),$(event.currentTarget.parentNode).find(".mint-cell").removeClass("isCheck"),$(event.currentTarget).find(".mint-radio-input")[0].checked=!0,$(event.currentTarget).addClass("isCheck"),$(".isCheck").each(function(t,i){e+=1*$(i).attr("price")}),this.price=e},openPopup:function(e){var t=this,i=this;switch(this.type=e,e){case"operateSlots":this.slots=this.operateSlots,this.popupVisible=!0;break;case"serviceSlots":this.selectData.is_open=this.operate,this.$axios({url:this.$baseUrl+"?r=interfaces/car-valuation/get-service-combobox",method:"post",data:this.selectData,transformRequest:[function(e){var t="";for(var i in e)t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(0===e.data.errcode){var s=[],a={},n=[];e.data.data&&e.data.data.length&&e.data.data.forEach(function(e,t){s.push(e.name)}),a.values=s,n.push(a),i.serviceSlots=n,i.slots=i.serviceSlots}else t.$toast(e.data.msg);t.popupVisible=!0})}},handleCancel:function(){this.popupVisible=!1},handleConfirm:function(){var e=this;switch(this.type){case"operateSlots":this.operate=this.$refs.areaPicker.getValues()[0],this.popupVisible=!1;break;case"serviceSlots":"自选服务"===this.$refs.areaPicker.getValues()[0]?this.$axios({url:this.$baseUrl+"?r=interfaces/car-valuation/get-self-service-data",method:"post",data:this.selectData,transformRequest:[function(e){var t="";for(var i in e)t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){0===t.data.errcode?(e.price="",e.radioArr=t.data.data,e.selfChoose=!0,t.data.data[0].value[0].unit&&(e.unit=t.data.data[0].value[0].unit)):e.$toast(t.data.msg)}):(this.getService=this.selectData,this.getService.name=this.$refs.areaPicker.getValues()[0],this.$axios({url:this.$baseUrl+"?r=interfaces/car-valuation/get-service-data",method:"post",data:this.getService,transformRequest:[function(e){var t="";for(var i in e)t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){0===t.data.errcode?(e.des=t.data.data[0].explain,e.price=t.data.data[0].price,e.unit=t.data.data[0].unit,e.selfChoose=!1):e.$toast(t.data.msg)})),this.service=this.$refs.areaPicker.getValues()[0],this.popupVisible=!1}},save:function(){if(this.price){var e=this;this.getServiceInfo.is_open=this.operate,this.getServiceInfo.price=this.price,this.getServiceInfo.unit=this.unit,this.getServiceInfo.name=this.service,this.checkedArr=[],$(".isCheck").each(function(t,i){e.checkedArr.push($(i).attr("id"))}),this.getServiceInfo.checkedArr=this.checkedArr,this.$router.push("./")}else this.$toast("请选择")}}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"wrap"}},[i("div",{staticClass:"select",on:{click:function(t){e.openPopup("operateSlots")}}},[i("mt-cell",{attrs:{title:"车辆是否运营","is-link":""}},[i("span",[e._v(e._s(e.operate?e.operate:"请选择"))])])],1),e._v(" "),i("div",{staticClass:"select",on:{click:function(t){e.openPopup("serviceSlots")}}},[i("mt-cell",{attrs:{title:"服务礼包","is-link":""}},[i("span",[e._v(e._s(e.service?e.service:"请选择服务礼包"))])])],1),e._v(" "),i("div",{staticClass:"container",staticStyle:{"margin-bottom":"48px"}},[e.selfChoose?i("div",{staticClass:"des"},e._l(e.radioArr,function(t,s){return i("div",{staticClass:"mint-radiolist"},[i("label",{staticClass:"mint-radiolist-title",staticStyle:{"font-size":"14px"}},[e._v(e._s(t.key))]),e._v(" "),e._l(t.value,function(t,s){return i("a",{staticClass:"mint-cell",attrs:{price:t.price,id:t.id},on:{click:function(t){e.check()}}},[i("div",{staticClass:"mint-cell-wrapper",staticStyle:{"background-image":"none","margin-bottom":"10px"}},[i("div",{staticClass:"mint-cell-title"},[i("label",{staticClass:"mint-radiolist-label"},[i("span",{staticClass:"mint-radio"},[i("input",{staticClass:"mint-radio-input",attrs:{type:"radio"},domProps:{value:t.id}}),e._v(" "),i("span",{staticClass:"mint-radio-core"})]),e._v(" "),i("span",{staticClass:"mint-radio-label"},[e._v(e._s(t.name))]),e._v(" "),i("span",{staticClass:"mint-price"},[e._v(e._s(t.price))]),e._v(" "),i("span",{staticClass:"mint-unit"},[e._v(e._s(t.unit))])]),e._v(" "),i("div",{staticStyle:{padding:"5px 0 5px 28px"}},[i("span",[e._v("服务说明：")]),e._v(" "),i("span",[e._v(e._s(t.explain))])])])])])})],2)})):i("div",{staticClass:"des"},[i("h4",[e._v("描述：")]),e._v(" "),i("p",{domProps:{innerHTML:e._s(e.des)}})])]),e._v(" "),i("div",{staticClass:"footer"},[i("span",[e._v("服务价格")]),e._v(" "),i("span",{staticClass:"price"},[e._v(e._s(e.price))]),e._v(" "),i("span",{staticClass:"unit"},[e._v(e._s(e.unit))]),e._v(" "),i("mt-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存并返回")])],1),e._v(" "),i("mt-popup",{staticClass:"mint-popup",attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[i("mt-picker",{ref:"areaPicker",attrs:{slots:e.slots,"show-toolbar":""}},[i("mt-button",{on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),i("mt-button",{on:{click:e.handleConfirm}},[e._v("确认")])],1)],1)],1)},staticRenderFns:[]};var n=i("vSla")(s,a,!1,function(e){i("GWhL")},"data-v-483e2ce6",null);t.default=n.exports}});
//# sourceMappingURL=2.c59c2c87c2aa4bb7bdba.js.map